
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="StarryNight - toolkit for optical pooled screening">
      
      
      
      
        <link rel="prev" href="../parser-configuration/">
      
      
        <link rel="next" href="../../developer/guides/system-maintenance-guide/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Operational Challenges FAQ - StarryNight</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#starrynight-operational-challenges-faq" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="StarryNight" class="md-header__button md-logo" aria-label="StarryNight" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            StarryNight
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Operational Challenges FAQ
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/broadinstitute/starrynight" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer/guides/system-maintenance-guide/" class="md-tabs__link">
          
  
  
    
  
  Developer Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../architecture/00_architecture_overview/" class="md-tabs__link">
          
  
  
    
  
  Developer Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../architecturev2/" class="md-tabs__link">
          
  
  
    
  
  Developer Architecture (v2)

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer/validation/testing-framework/" class="md-tabs__link">
          
  
  
    
  
  Developer Testing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer/roadmap/requirements/" class="md-tabs__link">
          
  
  
    
  
  Developer Roadmap

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer/legacy/pcpip-specs/" class="md-tabs__link">
          
  
  
    
  
  Developer Legacy

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="StarryNight" class="md-nav__button md-logo" aria-label="StarryNight" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    StarryNight
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/broadinstitute/starrynight" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example-pipeline-cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Complete Workflow Example
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parser-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parser Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Operational Challenges FAQ
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Operational Challenges FAQ
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-starting-processing-before-all-images-are-available" class="md-nav__link">
    <span class="md-ellipsis">
      1. Starting Processing Before All Images Are Available
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-adding-cycles-mid-experiment" class="md-nav__link">
    <span class="md-ellipsis">
      2. Adding Cycles Mid-Experiment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-resource-management-and-retry-logic" class="md-nav__link">
    <span class="md-ellipsis">
      3. Resource Management and Retry Logic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Resource Management and Retry Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3a-failed-job-retry-on-larger-machines" class="md-nav__link">
    <span class="md-ellipsis">
      3A. Failed Job Retry on Larger Machines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3b-rerunning-successful-jobs-with-new-pipeline-versions" class="md-nav__link">
    <span class="md-ellipsis">
      3B. Rerunning Successful Jobs with New Pipeline Versions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-handling-corrupted-images" class="md-nav__link">
    <span class="md-ellipsis">
      4. Handling Corrupted Images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-different-pipeline-versions-per-plate" class="md-nav__link">
    <span class="md-ellipsis">
      5. Different Pipeline Versions Per Plate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-different-pipeline-versions-per-well" class="md-nav__link">
    <span class="md-ellipsis">
      6. Different Pipeline Versions Per Well
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-machine-failures-during-job-launch" class="md-nav__link">
    <span class="md-ellipsis">
      7. Machine Failures During Job Launch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-incorrect-channel-mapping-information" class="md-nav__link">
    <span class="md-ellipsis">
      8. Incorrect Channel Mapping Information
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-incorrect-non-channel-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      9. Incorrect Non-Channel Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-mixed-round-and-square-acquisition" class="md-nav__link">
    <span class="md-ellipsis">
      10. Mixed Round and Square Acquisition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Related Documentation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/guides/system-maintenance-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Maintenance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/guides/workflow-implementation-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/00_architecture_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/01_algorithm_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithm Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/02_cli_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/03_module_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/04_pipeline_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/05_execution_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/06_configuration_layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/07_architecture_for_biologists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture for Biologists
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/08_practical_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Practical Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/09_architecture_flow_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flow Example
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../architecturev2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Developer Architecture (v2)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Developer Architecture (v2)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/00-1-principles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Principles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/01-algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithm Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/02-cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/03-module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/04-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/05-execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/06-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecturev2/99-0-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Testing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Developer Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/validation/testing-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/validation/validation-pipeline-1-illum-calc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline Validation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Roadmap
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Developer Roadmap
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/roadmap/requirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/roadmap/pipeline-automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline Automation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/roadmap/aws-deployment-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Deployment Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Legacy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Developer Legacy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/legacy/pcpip-specs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PCPIP Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/legacy/pcpip-pipelines/pcpip-pipelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PCPIP Reference Pipelines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-starting-processing-before-all-images-are-available" class="md-nav__link">
    <span class="md-ellipsis">
      1. Starting Processing Before All Images Are Available
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-adding-cycles-mid-experiment" class="md-nav__link">
    <span class="md-ellipsis">
      2. Adding Cycles Mid-Experiment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-resource-management-and-retry-logic" class="md-nav__link">
    <span class="md-ellipsis">
      3. Resource Management and Retry Logic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Resource Management and Retry Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3a-failed-job-retry-on-larger-machines" class="md-nav__link">
    <span class="md-ellipsis">
      3A. Failed Job Retry on Larger Machines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3b-rerunning-successful-jobs-with-new-pipeline-versions" class="md-nav__link">
    <span class="md-ellipsis">
      3B. Rerunning Successful Jobs with New Pipeline Versions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-handling-corrupted-images" class="md-nav__link">
    <span class="md-ellipsis">
      4. Handling Corrupted Images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-different-pipeline-versions-per-plate" class="md-nav__link">
    <span class="md-ellipsis">
      5. Different Pipeline Versions Per Plate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-different-pipeline-versions-per-well" class="md-nav__link">
    <span class="md-ellipsis">
      6. Different Pipeline Versions Per Well
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-machine-failures-during-job-launch" class="md-nav__link">
    <span class="md-ellipsis">
      7. Machine Failures During Job Launch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-incorrect-channel-mapping-information" class="md-nav__link">
    <span class="md-ellipsis">
      8. Incorrect Channel Mapping Information
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-incorrect-non-channel-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      9. Incorrect Non-Channel Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-mixed-round-and-square-acquisition" class="md-nav__link">
    <span class="md-ellipsis">
      10. Mixed Round and Square Acquisition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Related Documentation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="starrynight-operational-challenges-faq">StarryNight Operational Challenges FAQ</h1>
<h2 id="introduction">Introduction</h2>
<p>This FAQ addresses critical operational challenges faced by research teams transitioning from PCPIP to StarryNight for high-throughput microscopy image processing. These questions emerged from real-world discussions with users processing Optical Pooled Screening (OPS) data at scale.</p>
<p><strong>Status Legend:</strong></p>
<ul>
<li>✅ <strong>Available</strong>: Ready to use with current system</li>
<li>⚙️ <strong>Workaround</strong>: Possible but requires manual coordination</li>
<li>🚧 <strong>Planned</strong>: Architecturally supported, needs implementation</li>
<li>🔬 <strong>Design</strong>: Requires significant architectural consideration</li>
</ul>
<hr />
<h2 id="1-starting-processing-before-all-images-are-available">1. Starting Processing Before All Images Are Available</h2>
<p><strong>Real-World Scenario</strong>: Research teams often need to start processing before all images are available, particularly when SBS image generation takes weeks and they want to process the phenotyping arm while barcoding data is still being acquired.</p>
<p><strong>Status</strong>: ✅ <strong>Currently Available</strong></p>
<p><strong>Technical Solution</strong>:
StarryNight's modular pipeline architecture supports this through composition and registry customization:</p>
<p><strong>Code Location</strong>: <code>/starrynight/src/starrynight/pipelines/pcp_generic.py</code></p>
<p>Current implementation shows parallel CP and SBS processing:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Existing combined pipeline structure</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">Parallel</span><span class="p">([</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">Seq</span><span class="p">([</span><span class="n">cp_illum_calc_loaddata</span><span class="o">.</span><span class="n">pipe</span><span class="p">,</span> <span class="n">cp_illum_calc_cpipe</span><span class="o">.</span><span class="n">pipe</span><span class="p">,</span> <span class="o">...</span><span class="p">]),</span>  <span class="c1"># CP pipeline</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">Seq</span><span class="p">([</span><span class="n">sbs_illum_calc_loaddata</span><span class="o">.</span><span class="n">pipe</span><span class="p">,</span> <span class="n">sbs_illum_calc_cpipe</span><span class="o">.</span><span class="n">pipe</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>  <span class="c1"># SBS pipeline</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">])</span>
</span></code></pre></div>
<p><strong>Implementation Steps</strong>:</p>
<ol>
<li><strong>Create Pipeline Variants</strong>: Copy <code>pcp_generic.py</code> to create specialized versions (requires developer)</li>
<li><strong>Register New Pipelines</strong>: Add to <code>PIPELINE_REGISTRY</code> in <code>/starrynight/src/starrynight/pipelines/registry.py</code></li>
<li><strong>Execute Separately</strong>:
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Current: Create full experiment</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>starrynight<span class="w"> </span>exp<span class="w"> </span>new<span class="w"> </span>-i<span class="w"> </span>index.parquet<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Pooled CellPainting [Generic]&quot;</span><span class="w"> </span>-c<span class="w"> </span>config.json<span class="w"> </span>-o<span class="w"> </span>output/
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># Proposed: Separate pipelines (would need implementation)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>starrynight<span class="w"> </span>exp<span class="w"> </span>new<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Pooled CellPainting [Phenotypic]&quot;</span><span class="w"> </span>-c<span class="w"> </span>cp_config.json<span class="w"> </span>-o<span class="w"> </span>cp_output/
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>starrynight<span class="w"> </span>exp<span class="w"> </span>new<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Pooled CellPainting [SBS]&quot;</span><span class="w"> </span>-c<span class="w"> </span>sbs_config.json<span class="w"> </span>-o<span class="w"> </span>sbs_output/
</span></code></pre></div></li>
</ol>
<p><strong>Current Reality</strong>: Must modify codebase to add new pipeline types. The modular architecture supports this, but requires development effort rather than configuration.</p>
<p><strong>Current Workaround</strong>: Use existing pipeline but filter processing to skip unavailable data (discussed by developers as viable workaround).</p>
<hr />
<h2 id="2-adding-cycles-mid-experiment">2. Adding Cycles Mid-Experiment</h2>
<p><strong>Real-World Scenario</strong>: Experiments sometimes require additional cycles mid-process due to failed acquisitions, making the original cycle count configuration incorrect.</p>
<p><strong>Status</strong>: ✅ <strong>Currently Available</strong> (with data loss)</p>
<p><strong>Technical Solution</strong>: StarryNight auto-detects cycles from data structure, not configuration.</p>
<p><strong>Code Evidence</strong>: In <code>/starrynight/src/starrynight/experiments/pcp_generic.py</code>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Auto-detects number of cycles from actual data</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">sbs_n_cycles</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    <span class="n">sbs_images_df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cycle_id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="o">.</span><span class="n">rows</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Recovery Process</strong>:</p>
<ol>
<li><strong>Add New Cycle Images</strong>: Place additional cycle data in the dataset</li>
<li><strong>Re-inventory</strong>: <code>starrynight inventory</code> (detects new files)</li>
<li><strong>Re-index</strong>: <code>starrynight index</code> (updates cycle count automatically)</li>
<li><strong>Reconfigure</strong>: <code>starrynight exp new</code> (creates new experiment with updated cycle count)</li>
<li><strong>Reprocess</strong>: All downstream processing adapts to detected cycles automatically</li>
</ol>
<p><strong>Limitation</strong>: Previous processing results are lost and must be recomputed. No incremental update capability currently exists.</p>
<p><strong>Limitation</strong>: If you need to <em>exclude</em> specific cycles (e.g., skip corrupted cycle 5), this must be handled in the CellProfiler pipeline configuration, not in StarryNight's index layer.</p>
<hr />
<h2 id="3-resource-management-and-retry-logic">3. Resource Management and Retry Logic</h2>
<h3 id="3a-failed-job-retry-on-larger-machines">3A. Failed Job Retry on Larger Machines</h3>
<p><strong>Real-World Scenario</strong>: Tasks occasionally fail due to resource constraints and need retry with increased computational resources.</p>
<p><strong>Status</strong>: 🚧 <strong>Planned Architecture</strong> (6-12 months)</p>
<p><strong>Current Reality</strong>: Basic retry exists through Snakemake backend (<code>/pipecraft/src/pipecraft/backend/snakemake.py</code>), but no resource escalation.</p>
<p><strong>Planned Solution - Resource Hints System</strong>:
The architecture supports this through a planned resource hints API:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Conceptual module configuration</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">module_config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    <span class="s2">&quot;cpu_cores&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="s2">&quot;memory_gb&quot;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="s2">&quot;retry_with_larger&quot;</span><span class="p">:</span> <span class="kc">True</span>  <span class="c1"># Escalate resources on failure</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Technical Flow</strong>: StarryNight modules → PipeCraft compilation → Backend execution (Snakemake/AWS Batch)</p>
<p><strong>Current Workaround</strong>: Manual job resubmission with modified resource configurations.</p>
<h3 id="3b-rerunning-successful-jobs-with-new-pipeline-versions">3B. Rerunning Successful Jobs with New Pipeline Versions</h3>
<p><strong>Real-World Scenario</strong>: Users sometimes need to rerun specific subsets of previously successful jobs with updated pipeline versions.</p>
<p><strong>Status</strong>: ⚙️ <strong>Manual Workaround Available</strong></p>
<p><strong>Current Capability</strong>: Can rerun individual modules or entire workflows through Conductor backend, but no bulk selection interface.</p>
<p><strong>Technical Reality</strong>: Developers acknowledge this wasn't part of the original design considerations, so implementing bulk job selection would require significant architectural planning.</p>
<p><strong>Current Workaround</strong>: Force rerun of specific modules through Canvas UI or rebuild entire pipeline with new parameters.</p>
<hr />
<h2 id="4-handling-corrupted-images">4. Handling Corrupted Images</h2>
<p><strong>Real-World Scenario</strong>: Corrupted images occasionally need to be excluded from experiments or replaced with dummy images to maintain data consistency.</p>
<p><strong>Status</strong>: 🚧 <strong>Architectural Design Phase</strong> (6-12 months)</p>
<p><strong>Technical Challenge</strong>: Index files use Parquet format, which is (practically, given the size) immutable by design.</p>
<p><strong>Code Location</strong>: Index structure in <code>/starrynight/src/starrynight/algorithms/index.py</code></p>
<p><strong>Proposed Solution - Filter-Based Approach</strong>:
Rather than modifying index files, create filtering layers:</p>
<ol>
<li><strong>Blocklist Creation</strong>: Generate separate index files identifying corrupted images</li>
<li><strong>Anti-join Processing</strong>: Filter main index during data loading:
   <div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Conceptual filtering approach using polars</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">filtered_df</span> <span class="o">=</span> <span class="n">main_index_df</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">blacklist_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;file_path&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;anti&quot;</span><span class="p">)</span>
</span></code></pre></div></li>
<li><strong>Marimo Interface</strong>: Interactive notebook for filter creation and management</li>
<li><strong>Workflow Integration</strong>: All downstream modules respect filtered indices</li>
</ol>
<p><strong>Implementation Gap</strong>: No current CLI commands for index manipulation. Would need new filtering utilities in <code>/starrynight/src/starrynight/utils/dfutils.py</code>.</p>
<p><strong>Current Workaround</strong>: Manual file deletion and complete re-indexing (requires careful coordination).</p>
<hr />
<h2 id="5-different-pipeline-versions-per-plate">5. Different Pipeline Versions Per Plate</h2>
<p><strong>Real-World Scenario</strong>: Different plates within the same experiment sometimes require different pipeline versions, with the need for variation only discovered during processing.</p>
<p><strong>Status</strong>: ⚙️ <strong>Currently Available</strong> (via multiple projects)</p>
<p><strong>Technical Solution</strong>: Index filtering + separate project management</p>
<p><strong>Code Location</strong>: <code>/starrynight/src/starrynight/utils/dfutils.py</code> provides filtering:
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">filter_df_by_column_val</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span> <span class="n">column</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="k">return</span> <span class="n">filtered_df</span>
</span></code></pre></div></p>
<p><strong>Implementation Workflow</strong>:
Developers suggest a two-step approach: create separate Canvas projects for each plate group, using index filtering during project setup to include only the target plates for each pipeline version.</p>
<ol>
<li><strong>Canvas UI</strong>: Create separate projects for each plate</li>
<li><strong>Index Filtering</strong>: During project setup, filter to include only target plate</li>
<li><strong>Pipeline Assignment</strong>: Configure different pipeline versions per project</li>
<li><strong>Coordinate Results</strong>: Manually manage multiple project outputs</li>
</ol>
<p><strong>Developer Assessment</strong>: While functional, this approach requires manual coordination across multiple projects - a workable but inelegant solution similar to current multi-run workflows.</p>
<p><strong>User Requirements</strong>: Understanding of project management and index filtering concepts.</p>
<p><strong>Limitation</strong>: Not elegant - requires multiple project coordination. No single-project, multi-pipeline capability exists.</p>
<hr />
<h2 id="6-different-pipeline-versions-per-well">6. Different Pipeline Versions Per Well</h2>
<p><strong>Real-World Scenario</strong>: Individual wells occasionally require different pipeline processing than other wells within the same experiment.</p>
<p><strong>Status</strong>: ⚙️ <strong>Technically Possible</strong> (extreme edge case)</p>
<p><strong>Technical Solution</strong>: Same approach as plate-level filtering but at well granularity through Canvas project creation with index filtering.</p>
<p><strong>Technical Reality</strong>: Developers consider this an extreme edge case requiring substantial manual coordination. While technically possible through the filtering system, it's not streamlined for regular use.</p>
<p><strong>User Requirements</strong>: Advanced workflow management skills and deep understanding of granular data selection.</p>
<p><strong>Limitation</strong>: Functional but not elegant. Represents the boundary of practical workflow complexity.</p>
<hr />
<h2 id="7-machine-failures-during-job-launch">7. Machine Failures During Job Launch</h2>
<p><strong>Real-World Scenario</strong>: Job launch machines occasionally fail or become unresponsive during processing.</p>
<p><strong>Status</strong>: ✅ <strong>Built-in Architecture Strength</strong></p>
<p><strong>Technical Solution</strong>: Cloud-native design provides automatic resilience</p>
<p><strong>Technical Explanation</strong>: StarryNight's cloud-native design assumes S3-based storage for all operations, which means job state is automatically preserved in cloud storage rather than being dependent on local machine storage.</p>
<p><strong>Architecture Benefits</strong>:</p>
<ul>
<li><strong>S3 Storage Backend</strong>: All state persisted to cloud storage</li>
<li><strong>Stateless Job Design</strong>: Jobs can be relaunched on any machine</li>
<li><strong>AWS Batch Recovery</strong>: Automatic instance failure detection and reallocation</li>
<li><strong>No EFS Required</strong>: S3-based approach more robust than EFS-backed alternatives</li>
</ul>
<p><strong>User Experience</strong>: Transparent recovery - handled automatically at infrastructure level.</p>
<hr />
<h2 id="8-incorrect-channel-mapping-information">8. Incorrect Channel Mapping Information</h2>
<p><strong>Real-World Scenario</strong>: Channel mapping information provided during experiment setup is sometimes incorrect, requiring updates to the original configuration.</p>
<p><strong>Status</strong>: ✅ <strong>Currently Available</strong> with built-in validation</p>
<p><strong>Technical Solution</strong>: StarryNight already provides syntactic validation</p>
<p><strong>Code Evidence</strong>: In <code>pcp_generic.py</code>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Existing channel validation</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">for</span> <span class="n">cp_custom_channel</span> <span class="ow">in</span> <span class="n">init_config_parsed</span><span class="o">.</span><span class="n">cp_custom_channel_map</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="k">assert</span> <span class="n">cp_custom_channel</span> <span class="ow">in</span> <span class="n">cp_channel_list</span>
</span></code></pre></div></p>
<p><strong>Validation Capabilities</strong>:</p>
<ul>
<li><strong>Syntactic</strong>: Ensures channel names exist in indexed data</li>
<li><strong>Error Prevention</strong>: Clear error messages for non-existent channels</li>
<li><strong>Configuration Update</strong>: Modify mappings through Project Settings or experiment config</li>
</ul>
<p><strong>Recovery Process</strong>:</p>
<ol>
<li><strong>Update Channel Mapping</strong>: Modify experiment configuration with correct channel assignments</li>
<li><strong>Validate Configuration</strong>: Built-in checks verify channel names against index</li>
<li><strong>Reconfigure Project</strong>: Apply new mapping to all modules</li>
<li><strong>Full Rerun</strong>: Execute complete pipeline with corrected mapping</li>
</ol>
<p><strong>Limitation</strong>: Only syntactic validation exists. Semantic validation (e.g., detecting swapped biological meanings) requires manual verification.</p>
<p><strong>User Interface</strong>: Available through Canvas Project Settings at <code>/canvas/app/dashboard/project/id/[id]/view/project-settings/</code></p>
<hr />
<h2 id="9-incorrect-non-channel-parameters">9. Incorrect Non-Channel Parameters</h2>
<p><strong>Real-World Scenario</strong>: Non-channel parameters like stitchcrop hyperparameters or barcode file paths sometimes need correction due to initially incorrect information or updated requirements.</p>
<p><strong>Status</strong>: ✅ <strong>Fully Supported</strong></p>
<p><strong>Technical Implementation</strong>: Parameter updates through UI and configuration management</p>
<p><strong>UI Access</strong>: Canvas project settings interface at <code>/canvas/app/dashboard/project/id/[id]/view/project-settings/</code></p>
<p><strong>Common Parameter Categories</strong>:</p>
<ul>
<li><strong>Stitchcrop hyperparameters</strong>: Round vs. square acquisition settings</li>
<li><strong>Barcode CSV locations</strong>: Update path to correct barcode files</li>
<li><strong>Analysis thresholds</strong>: CellProfiler module parameters</li>
<li><strong>Output configurations</strong>: Result storage and naming</li>
</ul>
<p><strong>Update Process</strong>:</p>
<ol>
<li><strong>Navigate to Project Settings</strong>: Use web interface for parameter modification</li>
<li><strong>Update Relevant Parameters</strong>: Modify specific configuration values</li>
<li><strong>Save and Reconfigure</strong>: Apply changes to affected modules</li>
<li><strong>Selective Rerun</strong>: Execute only modules affected by parameter changes</li>
</ol>
<p><strong>Alternative Interface</strong>: Parameters can also be modified in Marimo execution notebooks for advanced users.</p>
<p><strong>User Requirements</strong>: Understanding of parameter impacts on different pipeline stages and module dependencies.</p>
<hr />
<h2 id="10-mixed-round-and-square-acquisition">10. Mixed Round and Square Acquisition</h2>
<p><strong>Real-World Scenario</strong>: Experiments often combine different acquisition patterns, such as round acquisition for phenotyping and square acquisition for SBS imaging.</p>
<p><strong>Status</strong>: ✅ <strong>Built-in Support</strong></p>
<p><strong>Technical Implementation</strong>: Independent configuration for CP and SBS acquisition types</p>
<p><strong>Code Evidence</strong>: In <code>/starrynight/src/starrynight/experiments/pcp_generic.py</code>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">CPConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="n">img_frame_type</span><span class="p">:</span> <span class="n">ImageFrameType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ImageFrameType</span><span class="o">.</span><span class="n">ROUND</span><span class="p">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="n">acquisition_order</span><span class="p">:</span> <span class="n">AcquisitionOrderType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">AcquisitionOrderType</span><span class="o">.</span><span class="n">SNAKE</span><span class="p">)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">SBSConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="n">img_frame_type</span><span class="p">:</span> <span class="n">ImageFrameType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ImageFrameType</span><span class="o">.</span><span class="n">ROUND</span><span class="p">)</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span class="n">acquisition_order</span><span class="p">:</span> <span class="n">AcquisitionOrderType</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">AcquisitionOrderType</span><span class="o">.</span><span class="n">SNAKE</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Configuration Options</strong>:</p>
<ul>
<li><strong>Cell Painting Config</strong>: Independent image frame type (<code>ROUND</code>/<code>SQUARE</code>) and acquisition order</li>
<li><strong>SBS Config</strong>: Separate image frame type and acquisition pattern settings</li>
<li><strong>Module Support</strong>: Stitchcrop module automatically handles different acquisition types</li>
</ul>
<p><strong>Usage Examples</strong>:</p>
<ul>
<li>Phenotypic arm: <code>ImageFrameType.ROUND</code> with <code>AcquisitionOrderType.SNAKE</code></li>
<li>SBS arm: <code>ImageFrameType.SQUARE</code> with <code>AcquisitionOrderType.SNAKE</code></li>
</ul>
<p><strong>User Interface</strong>: Settings configurable through standard experiment setup process.</p>
<p><strong>User Requirements</strong>: Understanding of acquisition type implications for downstream image processing.</p>
<hr />
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="../getting-started/">Getting Started Guide</a> - Basic StarryNight setup and usage patterns</li>
<li><a href="../parser-configuration/">Parser Configuration</a> - Data indexing and path parsing configuration</li>
<li><a href="../../architecture/00_architecture_overview/">Architecture Overview</a> - System design and component interactions</li>
<li><a href="../../architecture/04_pipeline_layer/">Pipeline Composition</a> - Understanding modular pipeline design</li>
</ul>
<hr />
<p><em>This FAQ reflects real-world usage scenarios and technical discussions with StarryNight users. The solutions balance practical implementation with architectural constraints, prioritizing functionality for competent users over simplified interfaces for every edge case.</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>