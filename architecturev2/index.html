
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="StarryNight - toolkit for optical pooled screening" name="description"/>
<link href="../architecture/09_architecture_flow_example/" rel="prev"/>
<link href="00-1-principles/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.18" name="generator"/>
<title>Overview - StarryNight</title>
<link href="../assets/stylesheets/main.7e37652d.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#starrynight-architecture">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="StarryNight" class="md-header__button md-logo" data-md-component="logo" href=".." title="StarryNight">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            StarryNight
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Overview
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/broadinstitute/starrynight" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4" fill="currentColor"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../user/getting-started/">
          
  
  
    
  
  User Guide

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../developer/guides/system-maintenance-guide/">
          
  
  
    
  
  Developer Guide

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../architecture/00_architecture_overview/">
          
  
  
    
  
  Developer Architecture

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="./">
          
  
  
    
  
  Developer Architecture (v2)

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../developer/validation/testing-framework/">
          
  
  
    
  
  Developer Testing

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../developer/roadmap/requirements/">
          
  
  
    
  
  Developer Roadmap

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../developer/legacy/pcpip-specs/">
          
  
  
    
  
  Developer Legacy

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="StarryNight" class="md-nav__button md-logo" data-md-component="logo" href=".." title="StarryNight">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    StarryNight
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/broadinstitute/starrynight" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4" fill="currentColor"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    User Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../user/getting-started/">
<span class="md-ellipsis">
    Getting Started
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/example-pipeline-cli/">
<span class="md-ellipsis">
    Complete Workflow Example
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/parser-configuration/">
<span class="md-ellipsis">
    Parser Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/operational-challenges/">
<span class="md-ellipsis">
    Operational Challenges FAQ
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Developer Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/guides/system-maintenance-guide/">
<span class="md-ellipsis">
    System Maintenance
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/guides/workflow-implementation-guide/">
<span class="md-ellipsis">
    Workflow Implementation
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Developer Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Developer Architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/00_architecture_overview/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/01_algorithm_layer/">
<span class="md-ellipsis">
    Algorithm Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/02_cli_layer/">
<span class="md-ellipsis">
    CLI Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/03_module_layer/">
<span class="md-ellipsis">
    Module Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/04_pipeline_layer/">
<span class="md-ellipsis">
    Pipeline Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/05_execution_layer/">
<span class="md-ellipsis">
    Execution Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/06_configuration_layer/">
<span class="md-ellipsis">
    Configuration Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/07_architecture_for_biologists/">
<span class="md-ellipsis">
    Architecture for Biologists
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/08_practical_integration/">
<span class="md-ellipsis">
    Practical Integration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/09_architecture_flow_example/">
<span class="md-ellipsis">
    Flow Example
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Developer Architecture (v2)
    
  </span>
</a>
<label class="md-nav__link md-nav__link--active" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Developer Architecture (v2)
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="00-1-principles/">
<span class="md-ellipsis">
    Principles
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="01-algorithm/">
<span class="md-ellipsis">
    Algorithm Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="02-cli/">
<span class="md-ellipsis">
    CLI Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="03-module/">
<span class="md-ellipsis">
    Module Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="04-pipeline/">
<span class="md-ellipsis">
    Pipeline Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="05-execution/">
<span class="md-ellipsis">
    Execution Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="06-configuration/">
<span class="md-ellipsis">
    Configuration Layer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="99-0-examples/">
<span class="md-ellipsis">
    Examples
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Developer Testing
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Developer Testing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/validation/testing-framework/">
<span class="md-ellipsis">
    Testing Framework
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/validation/validation-pipeline-1-illum-calc/">
<span class="md-ellipsis">
    Pipeline Validation
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Developer Roadmap
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Developer Roadmap
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/roadmap/requirements/">
<span class="md-ellipsis">
    Design Requirements
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/roadmap/pipeline-automation/">
<span class="md-ellipsis">
    Pipeline Automation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/roadmap/aws-deployment-roadmap/">
<span class="md-ellipsis">
    AWS Deployment Strategy
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Developer Legacy
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Developer Legacy
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/legacy/pcpip-specs/">
<span class="md-ellipsis">
    PCPIP Specifications
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../developer/legacy/pcpip-pipelines/pcpip-pipelines/">
<span class="md-ellipsis">
    PCPIP Reference Pipelines
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#system-overview">
<span class="md-ellipsis">
      System Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#layer-summary">
<span class="md-ellipsis">
      Layer Summary
    </span>
</a>
<nav aria-label="Layer Summary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#algorithm-layer-foundation">
<span class="md-ellipsis">
      Algorithm Layer (Foundation)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cli-layer-direct-access">
<span class="md-ellipsis">
      CLI Layer (Direct Access)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#module-layer-abstraction">
<span class="md-ellipsis">
      Module Layer (Abstraction)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pipeline-layer-composition">
<span class="md-ellipsis">
      Pipeline Layer (Composition)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-layer-runtime">
<span class="md-ellipsis">
      Execution Layer (Runtime)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-layer-cross-cutting">
<span class="md-ellipsis">
      Configuration Layer (Cross-cutting)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-design-principles">
<span class="md-ellipsis">
      Key Design Principles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-patterns">
<span class="md-ellipsis">
      Common Patterns
    </span>
</a>
<nav aria-label="Common Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#three-function-pattern-cellprofiler">
<span class="md-ellipsis">
      Three-Function Pattern (CellProfiler)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#specification-vs-implementation">
<span class="md-ellipsis">
      Specification vs Implementation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#container-based-execution">
<span class="md-ellipsis">
      Container-Based Execution
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-flow">
<span class="md-ellipsis">
      Usage Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#technology-stack">
<span class="md-ellipsis">
      Technology Stack
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="starrynight-architecture">StarryNight Architecture</h1>
<div class="admonition warning">
<p class="admonition-title">Experimental - Not Reviewed</p>
<p>Content may be incomplete or inaccurate.</p>
</div>
<p>StarryNight is a layered framework for scientific image processing that transforms raw microscopy data into quantitative measurements. Its architecture separates concerns across six distinct layers, enabling scalable, reproducible analysis of Optical Pooled Screening experiments.</p>
<h2 id="system-overview">System Overview</h2>
<p>StarryNight processes terabytes of microscopy images through a pipeline that progresses from simple functions to complex workflows:</p>
<pre class="mermaid"><code>flowchart TB
        A[Algorithm Layer&lt;br/&gt;Standalone Python Functions&lt;br/&gt;starrynight/algorithms/]
        B[CLI Layer&lt;br/&gt;Command-line Access&lt;br/&gt;starrynight/cli/]
        C[Module Layer&lt;br/&gt;Specs &amp; Compute Graphs&lt;br/&gt;starrynight/modules/]
        D[Pipeline Layer&lt;br/&gt;Workflow Composition&lt;br/&gt;starrynight/pipelines/]
        E[Execution Layer&lt;br/&gt;Backend Runtime&lt;br/&gt;pipecraft/backend/]

        A --&gt;|exposed as| B
        B --&gt;|invoked by| C
        C --&gt;|composed into| D
        D --&gt;|translated to| E
</code></pre>
<p><strong>Note</strong>: The Configuration Layer (<code>starrynight/experiments/</code>) operates as a cross-cutting concern, providing experiment parameters and settings that influence behavior across all layers.</p>
<h2 id="layer-summary">Layer Summary</h2>
<h3 id="algorithm-layer-foundation">Algorithm Layer (Foundation)</h3>
<p>Standalone Python functions implementing core image processing logic. No dependencies on other StarryNight components. Organized into algorithm sets that handle specific pipeline stages.</p>
<p><strong>Key characteristics:</strong></p>
<ul>
<li>Complete independence from other layers</li>
<li>Clear input/output contracts</li>
<li>Support for both local and cloud storage via cloudpathlib</li>
</ul>
<h3 id="cli-layer-direct-access">CLI Layer (Direct Access)</h3>
<p>Command-line interfaces wrapping algorithm functions. Uses Click to provide user-friendly access with parameter validation and path handling.</p>
<p><strong>Key characteristics:</strong></p>
<ul>
<li>Direct algorithm imports</li>
<li>Consistent command structure</li>
<li>Automatic path normalization</li>
</ul>
<h3 id="module-layer-abstraction">Module Layer (Abstraction)</h3>
<p>Standardized components combining specifications (via Bilayers) and compute graphs (via Pipecraft). Enables backend-agnostic execution and workflow composition.</p>
<p><strong>Key characteristics:</strong></p>
<ul>
<li>Dual nature: specs define "what", compute graphs define "how"</li>
<li>Container-based execution</li>
<li>Three-function pattern: LoadData → Pipeline → Execution</li>
</ul>
<h3 id="pipeline-layer-composition">Pipeline Layer (Composition)</h3>
<p>Combines modules into complete workflows. Integrates with Pipecraft to create executable compute graphs with defined execution patterns.</p>
<p><strong>Key characteristics:</strong></p>
<ul>
<li>Sequential and parallel execution blocks</li>
<li>Backend independence</li>
<li>End-to-end workflow definition</li>
</ul>
<h3 id="execution-layer-runtime">Execution Layer (Runtime)</h3>
<p>Manages actual execution via backends like Snakemake. Handles resource allocation, dependency management, and parallel processing.</p>
<p><strong>Key characteristics:</strong></p>
<ul>
<li>Backend configuration</li>
<li>Workflow translation</li>
<li>Container orchestration</li>
</ul>
<h3 id="configuration-layer-cross-cutting">Configuration Layer (Cross-cutting)</h3>
<p>Provides experiment configuration and parameter inference. Unlike other layers, it operates orthogonally, influencing behavior across all layers.</p>
<p><strong>Key characteristics:</strong></p>
<ul>
<li>Parameter inference from data</li>
<li>Experiment-specific settings</li>
<li>Module configuration generation</li>
</ul>
<h2 id="key-design-principles">Key Design Principles</h2>
<ol>
<li><strong>Separation of Concerns</strong>: Each layer has distinct responsibilities</li>
<li><strong>Backend Independence</strong>: Define once, run anywhere</li>
<li><strong>Progressive Enhancement</strong>: Each layer adds capabilities</li>
<li><strong>Explicit Over Implicit</strong>: Clear contracts and dependencies</li>
<li><strong>Composability</strong>: Components combine into larger workflows</li>
</ol>
<h2 id="common-patterns">Common Patterns</h2>
<h3 id="three-function-pattern-cellprofiler">Three-Function Pattern (CellProfiler)</h3>
<p>CellProfiler-based algorithm sets implement:</p>
<ol>
<li><strong>LoadData Generation</strong>: Create CSV files for image loading</li>
<li><strong>Pipeline Generation</strong>: Generate .cppipe pipeline files</li>
<li><strong>Execution</strong>: Run CellProfiler pipelines</li>
</ol>
<p>Other algorithm types (indexing, inventory, quality control) follow different patterns suited to their purpose.</p>
<h3 id="specification-vs-implementation">Specification vs Implementation</h3>
<ul>
<li>Specifications define interfaces and contracts</li>
<li>Implementations provide concrete execution</li>
<li>This separation enables multiple backends and inspection</li>
</ul>
<h3 id="container-based-execution">Container-Based Execution</h3>
<p>All processing runs in containers for:</p>
<ul>
<li>Reproducibility across environments</li>
<li>Dependency isolation</li>
<li>Scalable cloud execution</li>
</ul>
<h2 id="usage-flow">Usage Flow</h2>
<p>A typical StarryNight workflow:</p>
<ol>
<li><strong>Index Generation</strong>: Scan and catalog available images</li>
<li><strong>Experiment Configuration</strong>: Define experimental parameters</li>
<li><strong>Module Selection</strong>: Choose appropriate processing modules</li>
<li><strong>Pipeline Composition</strong>: Connect modules into workflows</li>
<li><strong>Execution</strong>: Run pipelines on compute infrastructure</li>
<li><strong>Result Collection</strong>: Gather and organize outputs</li>
</ol>
<h2 id="technology-stack">Technology Stack</h2>
<ul>
<li><strong>Core</strong>: Python with type hints</li>
<li><strong>CLI</strong>: Click framework</li>
<li><strong>Paths</strong>: cloudpathlib for storage abstraction</li>
<li><strong>Specs</strong>: Bilayers for interface definition</li>
<li><strong>Pipelines</strong>: Pipecraft for compute graphs</li>
<li><strong>Execution</strong>: Snakemake for workflow orchestration</li>
<li><strong>Containers</strong>: Docker/Singularity for isolation</li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="00-1-principles/">Principles</a> - Fundamental principles and patterns</li>
<li>Layer Documentation - See individual layer files (01-algorithm.md through 06-configuration.md)</li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
</body>
</html>